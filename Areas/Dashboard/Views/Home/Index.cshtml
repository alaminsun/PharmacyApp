@using PhramacyApp.Areas.Dashboard.Models
@model DashboardViewModel;
<style>
    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 320px;
        max-width: 660px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }
</style>
<section class="content">
    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3>@Model.self_count</h3>
                    <p>Total Selfs</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-green">
                <div class="inner">
                    <h3>@Model.medicine_count<sup style="font-size: 20px"></sup></h3>
                    <p>Total Medicine</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h3>@Model.stock_count</h3>
                    <p>Total Stock Quantity</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-red">
                <div class="inner">
                    <h3>@Model.supplier_count</h3>
                    <p>Total Suppliers</p>
                </div>
                <div class="icon">
                    <i class="ion ion-pie-graph"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
    </div>
    <div class="row">
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3>@Model.purchase_count</h3>
                    <p>No Of Purchase</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-green">
                <div class="inner">
                    <h3>@Model.purchase_amount<sup style="font-size: 20px"></sup></h3>
                    <p>Total Purchase Amount</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h3>@Model.sale_count</h3>
                    <p>No Of Sale</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-red">
                <div class="inner">
                    <h3>@Model.sale_amount</h3>
                    <p>Total Sale Amount</p>
                </div>
                <div class="icon">
                    <i class="ion ion-pie-graph"></i>
                </div>
                <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
    </div>
    <!-- /.row -->
    <!-- Main row -->
    <div class="row">
        <section class="col-lg-12 connectedSortable">
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Low Stock Medicine List</h3>
                    <div class="col-lg-12">
                        <table class="table table-striped table-bordered" id="medicineTable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>
                                        @localizer["SL"]
                                    </th>
                                    <th>
                                        @localizer["Medicine ID"]
                                    </th>
                                    <th>
                                        @localizer["Medicine Name"]
                                    </th>
                                    <th>
                                        @localizer["Batch No"]
                                    </th>
                                    @*<th>
                                            @localizer["Shelf"]
                                        </th>
                                        <th>
                                            @localizer["Batch No"]
                                        </th>*@
                                    <th>
                                        @localizer["Quantity"]
                                    </th>
                                    <th>
                                        @localizer["Buying Price"]
                                    </th>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var medicine in Model.lowStocks)
                                {
                                    <tr>
                                        <td>
                                            @medicine.Sl
                                        </td>
                                        <td>
                                            @medicine.Medicine_Id
                                        </td>
                                        <td>
                                            @medicine.Medicine_Name
                                        </td>
                                        <td>
                                            @medicine.Batch_No
                                        </td>
                                        <td>
                                            @medicine.Quantity
                                        </td>
                                        <td>
                                            @medicine.Buying_Price
                                        </td>
                                        @*<td>
                                                @medicine.Selling_Price
                                            </td>
                                            <td>
                                                @medicine.Expiry_Date
                                            </td>
                                            <td>
                                                @medicine.Supplier_Name
                                            </td>*@
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div class="row">
        <!-- Left col -->
        <section class="col-lg-7 connectedSortable">
            <!-- Custom tabs (Charts with tabs)-->
            <!-- DONUT CHART -->
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Donut Chart</h3>
                    @*<div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>*@
                    <figure class="highcharts-figure">
                        <div id="container"></div>
                        <p class="highcharts-description">
                            In Highcharts, pies can also be hollow, in which case they are commonly
                            referred to as donut charts. This pie also has an inner chart, resulting
                            in a hierarchical type of visualization.
                        </p>
                    </figure>
                </div>
                @*<div class="box-body chart-responsive">
                        <div class="chart" id="sales-chart" style="height: 300px; position: relative;"></div>
                    </div>*@
                <!-- /.box-body -->
            </div>
            <!-- /.nav-tabs-custom -->
        </section>
        <!-- /.Left col -->
        <!-- right col (We are only adding the ID to make the widgets sortable)-->
        <section class="col-lg-5 connectedSortable">
            <!-- TO DO List -->
            <div class="box box-primary">
                <div class="box-header">
                    <i class="ion ion-clipboard"></i>
                    <h3 class="box-title">To Do List</h3>
                    <div class="box-tools pull-right">
                        <ul class="pagination pagination-sm inline">
                            <li><a href="#">«</a></li>
                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">»</a></li>
                        </ul>
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <!-- See dist/js/pages/dashboard.js to activate the todoList plugin -->
                    <ul class="todo-list">
                        <li>
                            <!-- drag handle -->
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <!-- checkbox -->
                            <input type="checkbox" value="">
                            <!-- todo text -->
                            <span class="text">Patient 1 Check up Time</span>
                            <!-- Emphasis label -->
                            <small class="label label-danger"><i class="fa fa-clock-o"></i> 2 mins</small>
                            <!-- General tools such as edit or delete-->
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                        <li>
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <input type="checkbox" value="">
                            <span class="text">Medicine for X Patient</span>
                            <small class="label label-info"><i class="fa fa-clock-o"></i> 4 hours</small>
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                        <li>
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <input type="checkbox" value="">
                            <span class="text">New Patient Operation</span>
                            <small class="label label-warning"><i class="fa fa-clock-o"></i> 1 day</small>
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                        <li>
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <input type="checkbox" value="">
                            <span class="text">Ward Visit</span>
                            <small class="label label-success"><i class="fa fa-clock-o"></i> 3 days</small>
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                        <li>
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <input type="checkbox" value="">
                            <span class="text">Any other Activity</span>
                            <small class="label label-primary"><i class="fa fa-clock-o"></i> 1 week</small>
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                        <li>
                            <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>
                            <input type="checkbox" value="">
                            <span class="text">Any other Activity</span>
                            <small class="label label-default"><i class="fa fa-clock-o"></i> 1 month</small>
                            <div class="tools">
                                <i class="fa fa-edit"></i>
                                <i class="fa fa-trash-o"></i>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- /.box-body -->
                @*<div class="box-footer clearfix no-border">
                        <button type="button" class="btn btn-default pull-right"><i class="fa fa-plus"></i> Add item</button>
                    </div>*@
            </div>
            <!-- /.box -->
        </section>
        <!-- right col -->
    </div>
    <!--<div class="card card-default">
                <div class="card card-default">
                    <div class="card-heading">
                        <i class="fa fa-clock-o fa-fw"></i> Expiry Product List
                    </div>-->
    <!-- /.panel-heading -->
    <!--<div class="card-body">
        <div class="col-lg-12">
            <table id="myDataTable" class="table table-bordered table-striped table-hover table-responsive" style="width:100%">
                <thead>
                    <tr>
                        <th>Medicine ID</th>
                        <th>Medicine Name</th>
                        <th>Batch No</th>
                        <th>Quantity</th>
                        <th>Buying Price</th>
                        <th>Selling Price </th>
                        <th>Expiry Date</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>-->
    <!-- /.panel-body -->
    <!--</div>
    </div>-->
    <div class="row">
        <section class="col-lg-12 connectedSortable">
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Expiry Product List</h3>
                    <div class="col-lg-12">
                        <table class="table table-striped table-bordered" id="myDataTable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Medicine ID</th>
                                    <th>Medicine Name</th>
                                    <th>Batch No</th>
                                    <th>Quantity</th>
                                    <th>Buying Price</th>
                                    <th>Selling Price </th>
                                    <th>Expiry Date</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- /.row (main row) -->
</section>

@*<div id="viewAll" class="card-body table-responsive">
</div>*@

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>


<!-- Morris.js charts -->
@*<script src="bower_components/raphael/raphael.min.js"></script>*@
@*<script src="https: //cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>*@
@*<script src="bower_components/morris.js/morris.min.js"></script>*@

<script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
@section Scripts
{
    <script src="~/js/site.js"></script>
    <script>
        $(document).ready(function () {
    //        $("#myDataTable").DataTable();
    //    loadData();
    //        function loadData() {
    //            $('#viewAll').load('/Dashboard/Home/GetDetails');
    //    //$('#viewAll').load('/Transaction/Purchase/LoadAll');

    //}
            $.ajax({
                url: '@Url.Action("GetDetails", "Home")',
                method: 'get',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    $('#myDataTable').dataTable({
                        data: data,
                        'paging': true,
                        'sort': true,
                        'searching': true,
                        //'scrollY': 200,
                        //'scrollX': 700,
                        columns: [
                            //{
                            //    "data": "CustomerImage", "width": "50px", "render": function (data) {
                            //        return '<img class="rounded img-thumbnail" style="width:60px; height:58px;" src="/Images/Customers/' + data + '"/>';
                            //    }
                            //},
                            { 'data': 'medicine_Id', 'autowidth': false },
                            { 'data': 'medicine_Name', 'autowidth': false },
                            { 'data': 'batch_No', 'autowidth': false },
                            { 'data': 'quantity', 'autowidth': false },

                            //{ 'data': 'buying_Price', 'autowidth': true },
                            {
                                'data': 'buying_Price', render: function (data, type, row) {
                                    return "৳ " + data;
                                }
                            },
                            {
                                'data': 'selling_Price', render: function (data, type, row) {
                                    return "৳ " + data;
                                }
                            },
                            //{ 'data': 'selling_Price', 'autowidth': true },
                            {
                                'data': 'expiry_Date', 'autowidth': true
                            }
                        ]
                    })
                }

            });
    });

    var colors = Highcharts.getOptions().colors,
        categories = [
            'Chrome',
            'Firefox',
            'Internet Explorer',
            'Safari',
            'Edge',
            'Opera',
            'Other'
        ],
        data = [
            {
                y: 62.74,
                color: colors[2],
                drilldown: {
                    name: 'Chrome',
                    categories: [
                        'Chrome v65.0',
                        'Chrome v64.0',
                        'Chrome v63.0',
                        'Chrome v62.0',
                        'Chrome v61.0'
                    ],
                    data: [
                        0.1,
                        1.3,
                        53.02,
                        1.4,
                        0.88
                    ]
                }
            },
            {
                y: 10.57,
                color: colors[1],
                drilldown: {
                    name: 'Firefox',
                    categories: [
                        'Firefox v58.0',
                        'Firefox v57.0',
                        'Firefox v56.0',
                        'Firefox v55.0',
                        'Firefox v54.0'
                    ],
                    data: [
                        1.02,
                        7.36,
                        0.35,
                        0.11,
                        0.1
                    ]
                }
            },
            {
                y: 7.23,
                color: colors[0],
                drilldown: {
                    name: 'Internet Explorer',
                    categories: [
                        'Internet Explorer v11.0',
                        'Internet Explorer v10.0',
                        'Internet Explorer v9.0',
                        'Internet Explorer v8.0'
                    ],
                    data: [
                        6.2,
                        0.29,
                        0.27,
                        0.47
                    ]
                }
            },
            {
                y: 5.58,
                color: colors[3],
                drilldown: {
                    name: 'Safari',
                    categories: [
                        'Safari v11.0',
                        'Safari v10.1',
                        'Safari v10.0',
                        'Safari v9.1',
                        'Safari v9.0'
                    ],
                    data: [
                        3.39,
                        0.96,
                        0.36,
                        0.54,
                        0.13
                    ]
                }
            },
            {
                y: 4.02,
                color: colors[5],
                drilldown: {
                    name: 'Edge',
                    categories: [
                        'Edge v16',
                        'Edge v15',
                        'Edge v14',
                        'Edge v13'
                    ],
                    data: [
                        2.6,
                        0.92,
                        0.4,
                        0.1
                    ]
                }
            },
            {
                y: 1.92,
                color: colors[4],
                drilldown: {
                    name: 'Opera',
                    categories: [
                        'Opera v50.0',
                        'Opera v49.0',
                        'Opera v12.1'
                    ],
                    data: [
                        0.96,
                        0.82,
                        0.14
                    ]
                }
            },
            {
                y: 7.62,
                color: colors[6],
                drilldown: {
                    name: 'Other',
                    categories: [
                        'Other'
                    ],
                    data: [
                        7.62
                    ]
                }
            }
        ],
        browserData = [],
        versionsData = [],
        i,
        j,
        dataLen = data.length,
        drillDataLen,
        brightness;


    // Build the data arrays
    for (i = 0; i < dataLen; i += 1) {

        // add browser data
        browserData.push({
            name: categories[i],
            y: data[i].y,
            color: data[i].color
        });

        // add version data
        drillDataLen = data[i].drilldown.data.length;
        for (j = 0; j < drillDataLen; j += 1) {
            brightness = 0.2 - (j / drillDataLen) / 5;
            versionsData.push({
                name: data[i].drilldown.categories[j],
                y: data[i].drilldown.data[j],
                color: Highcharts.color(data[i].color).brighten(brightness).get()
            });
        }
    }

    // Create the chart
    Highcharts.chart('container', {
        chart: {
            type: 'pie'
        },
        title: {
            text: 'Browser market share, January, 2018'
        },
        subtitle: {
            text: 'Source: <a href="http://statcounter.com" target="_blank">statcounter.com</a>'
        },
        plotOptions: {
            pie: {
                shadow: false,
                center: ['50%', '50%']
            }
        },
        tooltip: {
            valueSuffix: '%'
        },
        series: [{
            name: 'Browsers',
            data: browserData,
            size: '60%',
            dataLabels: {
                formatter: function () {
                    return this.y > 5 ? this.point.name : null;
                },
                color: '#ffffff',
                distance: -30
            }
        }, {
            name: 'Versions',
            data: versionsData,
            size: '80%',
            innerSize: '60%',
            dataLabels: {
                formatter: function () {
                    // display only if larger than 1
                    return this.y > 1 ? '<b>' + this.point.name + ':</b> ' +
                        this.y + '%' : null;
                }
            },
            id: 'versions'
        }],
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 400
                },
                chartOptions: {
                    series: [{
                    }, {
                        id: 'versions',
                        dataLabels: {
                            enabled: false
                        }
                    }]
                }
            }]
        }
    });
    //$(document).ready(function () {

    //    loadData();
    //        function loadData() {
    //        $('#viewAll').load('/Dashboard/Home/LoadAll');
    //    //$('#viewAll').load('/Transaction/Purchase/LoadAll');

    //}
    //});


  @*(function ($) {
    "use strict";
    //DONUT CHART
    var donut = new Morris.Donut({
      element: 'sales-chart',
      resize: true,
      colors: ["#3c8dbc", "#f56954", "#00a65a"],
      data: [
        {label: "Registered Doctors", value: @Model.doctors_count},
        {label: "Registered Nurses", value: @Model.nurses_count},
        {label: "Registered Patients", value: @Model.patients_count}
      ],
      hideHover: 'auto'
    });
  });*@
    </script>
}
    @*</body>
        </html>*@